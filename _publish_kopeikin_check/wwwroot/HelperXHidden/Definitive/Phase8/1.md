# Phase 8.1 â€” User Roles And Permissions Model

## What To Learn
Permissions are explicit, enumerated values that gate access to reports, observations, and administrative actions. Roles are associated with these permissions to control user capabilities.

## Why It Exists
Sonar manages child data; permissions are essential to prevent unauthorized access.

## Where It Lives In The Codebase
- Permission enum: `sonar-api/sonar-utilities/src/Permission.cs`
- Role entities: `sonar-api/sonar-data/Entity/*Role*`
- Permission enforcement: `sonar-api/sonar-api/src/Middleware/RequiresPermissionEndpointFilters.cs`

## How Permissions Work
- Permissions are numeric IDs with descriptive names in `Permission.cs`.
- Endpoint filters check if the authenticated user has the required permission.
- Permissions are also used to enable or disable feature modes (e.g., effective assessments).

## Questions And Answers
- **Which roles can access statutory data?**
  - Roles mapped to statutory permissions such as `Legacy_Statutory_*` or report-specific permissions (e.g., `Report_Eyfs_SummativeGld`).

## Additional Questions You Should Be Able To Answer
- Why are legacy permissions still present?
  - Legacy UIs and workflows still depend on them, and they map to existing stored procedures and endpoints.

## Completion Check
You can locate permission definitions and explain how they are enforced.
