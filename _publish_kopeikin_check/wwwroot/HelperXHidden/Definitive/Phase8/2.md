# Phase 8.2 — Data Protection Concerns (Children’s Data)

## What To Learn
Sonar handles child records and assessment data. Data access is scoped to schools and constrained by permissions.

## Why It Exists
Child data requires strong access control and careful handling in all outputs.

## Where It Lives In The Codebase
- Authenticated user context: `sonar-api/sonar-api/src/Program.cs`
- Permission filters: `sonar-api/sonar-api/src/Middleware/RequiresPermissionEndpointFilters.cs`
- Machine-key auth: `sonar-api/sonar-api/src/Middleware/MachineKeyAuthenticationMiddleware.cs`

## Protection Mechanisms
- **School scoping**: All data queries use `CurrentSchoolId`.
- **Permission gating**: Endpoints require explicit permissions.
- **Machine-key routes**: Background operations require separate machine key authentication.

## Questions And Answers
- **Which endpoints are likely to be DSAR-relevant?**
  - Endpoints that retrieve pupil records, assessments, observations, and reports. These all surface personally identifiable information.

## Additional Questions You Should Be Able To Answer
- How do you ensure a new endpoint respects data protection?
  - Apply permission checks, scope all queries by school ID, and avoid returning unnecessary fields.

## Completion Check
You can explain the access boundaries that protect child data and identify which endpoints are sensitive.
