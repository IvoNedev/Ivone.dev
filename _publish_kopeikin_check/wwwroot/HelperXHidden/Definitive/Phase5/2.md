# Phase 5.2 â€” Database Schema And Migrations

## What To Learn
Sonar uses SQL Server as its primary data store. Schema changes are managed through DbUp scripts.

## Why It Exists
Controlled migrations are required for safe deployment and backward compatibility.

## Where It Lives In The Codebase
- DbUp project: `sonar-api/sonar-dbup/src/Program.cs`
- Migration scripts: `sonar-api/sonar-dbup/src/Scripts/*`
- Entity context: `sonar-api/sonar-data/SonarDbContext.cs`

## How Migrations Work
- DbUp runs ordered SQL scripts to migrate schema.
- Migrations are executed as part of environment setup or deployment pipelines.

## Questions And Answers
- **How are schema changes reviewed and deployed?**
  - Schema changes are introduced as new DbUp scripts; they are applied during environment setup or deployment.

## Additional Questions You Should Be Able To Answer
- Why does Sonar use DbUp instead of EF migrations?
  - DbUp allows direct control of SQL scripts, which is useful for legacy schemas and stored procedures.

## Completion Check
You can locate migration scripts and explain how schema changes are applied.
