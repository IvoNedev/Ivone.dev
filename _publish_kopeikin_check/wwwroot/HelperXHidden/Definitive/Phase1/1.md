# Phase 1.1 â€” UK School Structures: Years, Terms, Key Stages, Cohorts

## What To Learn
UK school structures define the axes of all assessment and reporting in Sonar. You must understand how academic years, terms, year groups, and cohorts are represented and how they are used to partition data.

## Why It Exists
Every report and assessment query is scoped by time (academic year + term) and cohort (year group/class). If you misread these, you will misinterpret data and produce invalid results.

## Where It Lives In The Codebase
- Assessment points and term labeling: `sonar-api/sonar-utilities/src/AssessmentPoint.cs`
- National curriculum year groups: `sonar-api/sonar-utilities/src/NationalCurriculumYear.cs`
- Bands (age-related expectation bands): `sonar-api/sonar-utilities/src/Band.cs`
- Report parameters (subject/year/term filters): `sonar/reports-web/src/app/helpers/reportData/*`

## Core Concepts Explained
### Academic Year
- An academic year is represented by an integer ID. In `AssessmentPoint.GetAcademicYearLabel()`, the ID is converted into a label like `2025/2026` by adding 2006 to the ID.
- This encoding means the academic year ID is a relative index, not a calendar year.

### Term
- Terms are encoded as integer IDs in `AssessmentPoint.TermId`.
- `AssessmentPoint.GetTermLabel()` maps IDs to human-readable term names:
  - 1: Autumn 1
  - 2: Autumn 2
  - 3: Spring 1
  - 4: Spring 2
  - 5: Summer 1
  - 6: Summer 2
  - 99: End of Year Projection
  - -1: Start of Year Baseline

### Assessment Point
- An `AssessmentPoint` is a composite of `AcademicYearId` and `TermId`.
- `AssessmentPoint.AssessmentPointCode` is a sortable numeric key: `AcademicYearId * 10_000 + TermId`.
- `AssessmentPoint.IsBefore()` compares points in time for progress calculations.

### National Curriculum Year
- `NationalCurriculumYear` is an enum mapping year group IDs to labels (Pre-Entry to Year 13).
- Negative values represent early years (Pre-Entry, Nursery, Reception).
- Positive values represent Year 1 onward.

### Bands
- `Band` is an enum representing age-related expectation bands, closely aligned to year groups but with special early years bands (0-3, 3-4, Engagement Model).
- `BandExtensions.IsMatchingNationalCurriculumYear` allows band/year equality checks.

### Cohorts
- A cohort is a group of pupils, typically by year group or class.
- In reporting, cohorts are represented by filter sets and by pupil lists.
- Cohorts are not a single entity; they are derived by filters and grouping.

## Questions And Answers
- **How does Sonar encode terms (including end-of-year projections)?**
  - Terms are encoded as integer IDs in `AssessmentPoint.TermId`. Special IDs like 99 represent end-of-year projection.

- **How are year groups stored and used in filters?**
  - Year groups are represented by `NationalCurriculumYear` values and are passed into report parameters to filter pupil sets.

## Additional Questions You Should Be Able To Answer
- Why is `AssessmentPoint` a record rather than a class?
  - It is a value object with immutable semantics; equality and ordering are based on its value.

- Why does the academic year label add 2006?
  - The academic year ID is stored as an offset, so a base year is required to generate labels.

## Completion Check
You can explain how academic years, terms, assessment points, and year groups are encoded, and you can point to the exact code that defines each mapping.
