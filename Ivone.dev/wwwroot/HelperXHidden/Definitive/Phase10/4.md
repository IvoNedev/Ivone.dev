# Phase 10.4 â€” Monitoring, Logging, And Alerting

## What To Learn
Sonar uses OpenTelemetry for tracing and metrics, with exporters for Application Insights and OTLP in development.

## Why It Exists
Monitoring is required to diagnose production issues and track performance regressions.

## Where It Lives In The Codebase
- Telemetry registration: `sonar-api/sonar-api/src/Infrastructure/Telemetry/TelemetryRegistration.cs`
- Program pipeline: `sonar-api/sonar-api/src/Program.cs`

## Monitoring Features
- ASP.NET Core and HTTP client instrumentation.
- SQL client tracing for DB performance.
- Prometheus scraping endpoint in development.

## Questions And Answers
- **Where are traces and metrics exported?**
  - Traces are exported to Azure Monitor via the Application Insights exporter. Metrics can be scraped via `/metrics` in development.

## Additional Questions You Should Be Able To Answer
- How is user context added to telemetry?
  - `AuthenticatedUserTelemetryProcessor` adds user context to traces.

## Completion Check
You can locate telemetry setup and explain where traces and metrics go.
