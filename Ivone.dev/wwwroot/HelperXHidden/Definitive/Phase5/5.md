# Phase 5.5 â€” Performance And Scaling Considerations

## What To Learn
Reporting is read-heavy and sensitive to performance. Sonar uses read-only contexts, caching, and stored procedures to optimize performance.

## Why It Exists
Slow reporting impacts classroom and leadership workflows and can destabilize the system under load.

## Where It Lives In The Codebase
- Read-only DB context: `sonar-api/sonar-data/SonarDbContext.cs`
- Cache infrastructure: `sonar-api/sonar-api/src/Infrastructure/Cache/*`
- Stored procedure wrappers: `sonar-api/sonar-api/src/StoredProcedures/*`

## Performance Techniques In Code
1. **Read-Only DbContext**
   - `SonarReadOnlyDbContext` disables tracking and prevents writes.
2. **Stored Procedures**
   - Used for heavy or legacy queries to optimize performance.
3. **Caching**
   - Redis cache reduces repeated query cost.

## Questions And Answers
- **Which report endpoints depend on stored procedures?**
  - Any report that uses data access layers in `StoredProcedures` or legacy areas. Search within `sonar-api/sonar-api/src/Areas/Reports/*` for stored procedure usage.

## Additional Questions You Should Be Able To Answer
- Why does read-only context disable `SaveChanges`?
  - To prevent accidental writes in reporting flows and ensure safe read-only usage.

## Completion Check
You can explain how Sonar uses read-only contexts, stored procedures, and caching to maintain performance.
