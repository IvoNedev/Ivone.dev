@page
@model Ivone.dev.Areas.Pyt.Pages.Trips.IndexModel
@{
    ViewData["Title"] = "Trips";
}

<section class="panel">
    <div class="panel-header">
        <h1>???? ????????</h1>
        <div class="muted">???: ???? ? ????? ??? 10 ???????</div>
    </div>

    <form id="trip-form" class="trip-grid" autocomplete="off">
        <input type="hidden" id="trip-id" />

        <label>Vehicle
            <select id="vehicle-id" required></select>
            <span id="vehicle-mileage" class="inline-hint"></span>
        </label>

        <label>Driver
            <select id="driver-id" required></select>
        </label>

        <label>Start
            <input type="datetime-local" id="start-datetime" required />
        </label>

        <label>End
            <input type="datetime-local" id="end-datetime" required />
        </label>

        <div class="quick-buttons">
            <button type="button" class="btn-secondary" data-date-action="today">Today</button>
            <button type="button" class="btn-secondary" data-date-action="yesterday">Yesterday</button>
            <button type="button" class="btn-secondary" data-date-action="plus1">+1 day</button>
            <button type="button" class="btn-secondary" data-date-action="same">= Start</button>
        </div>

        <label>Start Mileage
            <input type="number" id="start-mileage" min="0" required />
        </label>

        <label>End Mileage
            <input type="number" id="end-mileage" min="0" required autofocus />
        </label>

        <label>Start Location
            <select id="start-location-id" required></select>
        </label>

        <label>End Location
            <select id="end-location-id" required></select>
        </label>

        <div class="inline-controls">
            <button type="button" class="btn-secondary" id="swap-locations">Swap</button>
        </div>

        <label>Purpose
            <input id="purpose" list="purpose-presets" maxlength="120" required />
            <datalist id="purpose-presets"></datalist>
        </label>

        <label>Notes
            <input id="notes" maxlength="1000" />
        </label>

        <div class="form-actions">
            <button type="submit" class="btn-primary" id="save-btn">Save</button>
            <button type="button" class="btn-primary" id="save-new-btn">Save &amp; New</button>
            <button type="button" class="btn-secondary" id="reset-btn">Reset to defaults</button>
        </div>

        <div id="trip-message" class="status-message" aria-live="polite"></div>
        <ul id="trip-warnings" class="warning-list"></ul>
    </form>
</section>

<section class="panel">
    <div class="panel-header">
        <h2>Trips</h2>
    </div>

    <form id="filters-form" class="filter-grid">
        <label>From<input type="date" id="filter-from" /></label>
        <label>To<input type="date" id="filter-to" /></label>
        <label>Vehicle<select id="filter-vehicle"></select></label>
        <label>Driver<select id="filter-driver"></select></label>
        <div class="inline-controls">
            <button type="submit" class="btn-secondary">Apply</button>
            <button type="button" id="clear-filters" class="btn-secondary">Clear</button>
            <button type="button" id="export-pdf" class="btn-primary">Export PDF</button>
            <button type="button" id="export-excel" class="btn-primary">Export Excel</button>
        </div>
    </form>

    <div class="table-wrap">
        <table id="trips-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Vehicle</th>
                    <th>Driver</th>
                    <th>Start</th>
                    <th>End</th>
                    <th>Route</th>
                    <th>Km</th>
                    <th>Purpose</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</section>

@section Scripts {
    <script src="~/js/pyt/trips.js" asp-append-version="true"></script>
}
